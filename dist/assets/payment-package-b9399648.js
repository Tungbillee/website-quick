import{_ as f,k as y,o as n,c as r,a as e,t as l,F as b,e as k,p as x,j as w}from"./index-ac4777e4.js";import{b as m}from"./route-block-83d24a4e.js";const p={data(){return{user:{},is_buy:!0,type_time:"month",error:"",what_select:["Sản xuất video bản tin hàng loạt","Ghép (duet)","Nối video","Tải hàng loạt video từ nhiều nền tảng"],price:[],minutes_buy:0,voice_buy:0,totalPrice:0,selected_period:"",select_package:null,packagesList:[{icon:"icon_Normal_big.svg",name:"Normal",content:"Gói dành cho nhu cầu trung bình"},{icon:"icon_Advance_big.svg",name:"Advance",content:"Gói dành cho nhu cầu cao"},{icon:"icon_Pro_big.svg",name:"Pro",content:"Gói dành cho nhu cầu cao"}]}},computed:{getIconByName(){let t=this.select_package.name;const c={Normal:"icon_Normal_big.svg",Pro:"icon_Pro_big.svg",Advance:"icon_Advance_big.svg"};return this.img(c[t]||"default_icon.svg")},selected_period(){var c;return{Normal:"1 tháng",Advance:"6 tháng",Pro:"12 tháng"}[(c=this.select_package)==null?void 0:c.name]||""}},created(){this.getUser(),this.select_package=JSON.parse(localStorage.getItem("select_package")),console.log(this.select_package,"select_package"),this.price=y().price},methods:{formatNumber(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},goToManage(){this.$router.push("/settings")},goToBuyPackage(){this.$router.push("/buy-package")},async goToPayment(){let t=await this.api({path:"/web/user/buy-package",method:"POST",data:{name_package:this.select_package.name,selected_period:this.select_package.period}});console.log(t,"kết quả"),t.success?this.is_buy=!1:this.error=t.message},img(t){return"images/admin-panel/"+t},async getUser(t=3){try{let c=await this.api({path:"/web/user/get-info"});if(c.success)this.user=c.data_user;else throw new Error("API request failed")}catch(c){if(console.error("Error fetching user info:",c),t>0)return console.log(`Retrying... ${t} attempts left`),await new Promise(_=>setTimeout(_,1e3)),this.getUser(t-1);console.error("Max retry attempts reached")}}}},a=t=>(x("data-v-86299a7f"),t=t(),w(),t),N={class:"container"},P={key:0,class:"container-all-buy"},T=a(()=>e("div",{class:"space"},null,-1)),S={class:"table-buy-more flex-al-jt"},B={class:"billing-buy-more flex-cl-al ps-rl"},I={class:"icon_logo flex-al-jt",style:{padding:"10px"}},j=["src"],A={class:"fw-600 fz-20"},M=a(()=>e("div",{class:"fw-600 text-green mgt-20"},"SỬ DỤNG TOÀN BỘ TÍNH NĂNG",-1)),z=["src"],G={class:"title-content"},q={class:"flex-al gap-10 mgt-20"},E=["src"],O={class:"title-content"},U=a(()=>e("div",{class:"mgt-20 dashed"},null,-1)),D={class:"flex-bw-al",style:{width:"100%"}},F=a(()=>e("div",{class:"text-300 fz-16"},"Số point cần thanh toán",-1)),L={class:"fw-600 fz-16 flex-al gap-5"},C={class:"flex-al gap-3"},H=["src"],J=a(()=>e("div",{class:"text-yellow fw-600"},"Point",-1)),Q={class:"info-balace flex-bw-al"},R={class:"flex-al gap-5"},V=["src"],K=a(()=>e("div",{class:"fw-600"},"Số dư tài khoản",-1)),W={class:"flex-al gap-5"},X={class:"fw-600"},Y={class:"flex-al gap-3"},Z=["src"],$=a(()=>e("div",{class:"text-yellow fw-600"},"Point",-1)),ee=["src"],te=a(()=>e("div",{class:"text-300 fz-16"},"Quay lại bảng giá",-1)),se={class:"text-red flex-al-jt mgt-20"},ce={key:1,class:"flex-al-jt",style:{width:"100%",height:"100%"}},ae={class:"flex-cl-jt"},oe=["src"],ie=a(()=>e("div",{style:{"text-align":"center"},class:"fw-600 fz-24 mgt-10"},"Thanh toán thành công",-1)),le=a(()=>e("div",{class:"fz-16 mgt-10"},"Đến trang quản lý xem chi tiết giao dịch",-1));function ne(t,c,_,re,o,s){var g,d,h,u;return n(),r("div",N,[o.is_buy?(n(),r("div",P,[T,e("div",S,[e("div",B,[e("div",I,[e("img",{style:{width:"100%",height:"100%"},src:s.getIconByName,alt:""},null,8,j)]),e("div",A,l(s.selected_period),1),M,(n(!0),r(b,null,k(o.what_select,(i,v)=>(n(),r("div",{class:"flex-al mgt-15 gap-10",key:v},[e("img",{src:s.img("icon_ok.svg"),alt:""},null,8,z),e("div",G,l(i),1)]))),128)),e("div",q,[e("img",{src:s.img("icon_ok.svg"),alt:""},null,8,E),e("div",O,l(s.formatNumber(((g=o.select_package)==null?void 0:g.time)??0))+" phút tạo phụ đề AI & "+l(s.formatNumber(((d=o.select_package)==null?void 0:d.voice)??0))+" ký tự lồng tiếng tự động AI",1)]),U,e("div",D,[F,e("div",L,[e("div",null,l(s.formatNumber(((h=o.select_package)==null?void 0:h.price)??0)),1),e("div",C,[e("img",{src:s.img("icon_point.svg"),alt:""},null,8,H),J])])]),e("div",Q,[e("div",R,[e("img",{src:s.img("icon_card_buy_more.svg"),alt:""},null,8,V),K]),e("div",W,[e("div",X,l(s.formatNumber(((u=o.user)==null?void 0:u.balance)??0)),1),e("div",Y,[e("img",{src:s.img("icon_point.svg"),alt:""},null,8,Z),$])])]),e("div",{class:"button flex-al-jt mgt-20",style:{"border-radius":"10px",width:"100%"},onClick:c[0]||(c[0]=(...i)=>s.goToPayment&&s.goToPayment(...i))},"Thanh toán ngay"),e("div",{class:"flex-al-jt gap-5 mgt-30",style:{cursor:"pointer"},onClick:c[1]||(c[1]=(...i)=>s.goToBuyPackage&&s.goToBuyPackage(...i))},[e("img",{src:s.img("icon_back.svg"),alt:""},null,8,ee),te]),e("div",se,l(o.error),1)])])])):(n(),r("div",ce,[e("div",ae,[e("img",{style:{"padding-left":"20px"},src:s.img("buy_success.svg"),alt:""},null,8,oe),ie,le,e("div",{class:"button mgt-30 flex-al-jt",onClick:c[2]||(c[2]=(...i)=>s.goToManage&&s.goToManage(...i))},"Đến trang quản lý")])]))])}typeof m=="function"&&m(p);const de=f(p,[["render",ne],["__scopeId","data-v-86299a7f"]]);export{de as default};
