import{l as y}from"./loading_curso-1b76a858.js";import{_ as w,r as k,o as n,c as d,F as g,a as s,e as T,t as c,l as S,f as M,i as V,z as P,h as C,p as j,j as B}from"./index-0d5ea707.js";import{b as f}from"./route-block-83d24a4e.js";const m={components:{loading:y},data(){return{user:{},is_buy:!0,is_loading:!1,error_message:"",selectedValue:null,voiceOptions:[{value:2e6,characters:"2.000.000 ký tự",discountText:"Không có giảm giá",discountClass:"text-300",points:"300.000"},{value:4e6,characters:"4.000.000 ký tự",discountText:"Giảm 20%",discountClass:"text-red",points:"480.000"},{value:8e6,characters:"8.000.000 ký tự",discountText:"Giảm 50%",discountClass:"text-green",points:"600.000"}]}},created(){this.getUser()},methods:{img(e){return"images/admin-panel/"+e},goToManage(){this.$router.push("/settings")},async payMentSubtitle(){var t;this.is_loading=!0;let e=await this.api({path:"/web/user/buy-voice",method:"POST",data:{number_voice:(t=this.selectedValue)==null?void 0:t.value}});e.success?this.is_buy=!1:this.error_message=e.message,this.is_loading=!1},async getUser(e=3){try{let t=await this.api({path:"/web/user/get-info"});if(t.success)this.user=t.data_user;else throw new Error("API request failed")}catch(t){if(console.error("Error fetching user info:",t),e>0)return console.log(`Retrying... ${e} attempts left`),await new Promise(r=>setTimeout(r,1e3)),this.getUser(e-1);console.error("Max retry attempts reached")}},formatPrice(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},handleBuyMore(){this.is_loading=!0}}},l=e=>(j("data-v-b9407f38"),e=e(),B(),e),I={class:"container-buy-more"},U=l(()=>s("div",{class:"spaces"},null,-1)),z={class:"table-buy-more"},G={class:"section-buy-more"},N={class:"flex-al gap-3"},q=["src"],E=l(()=>s("div",{class:"fw-600"},"Quay lại",-1)),L=l(()=>s("div",{class:"text-green mgt-50 fw-600"},"MUA THÊM KÝ TỰ LỒNG TIẾNG",-1)),O={class:"select-number-voice flex-cl gap-15"},A={class:"select-number-voice flex-cl gap-15"},D={class:"flex-al gap-10"},F=["value"],K={class:"billing-buy-more"},R={class:"body-billing-buy-more flex-cl gap-40"},H=M('<div class="flex-bw-al" data-v-b9407f38><div class="text-300" data-v-b9407f38>Loại mua</div><div class="fw-600" data-v-b9407f38>Mua ký tự lồng tiếng</div></div><div class="flex-bw-al" data-v-b9407f38><div class="text-300" data-v-b9407f38>Thời hạn mua</div><div class="fw-600" data-v-b9407f38>Sẽ hết hạn khi gói cước hết hạn</div></div>',2),Q={class:"flex-bw-al"},J=l(()=>s("div",{class:"text-300"},"Chi tiết",-1)),W={class:"fw-600"},X={class:"flex-bw-al"},Y=l(()=>s("div",{class:"text-300"},"Tổng giá",-1)),Z={class:"fw-600"},$={class:"footer-billing-buy-more"},ss={class:"flex-bw-al"},es=l(()=>s("div",{class:"text-300"},"Số point cần thanh toán",-1)),ts={class:"fw-600"},is={class:"info-balace flex-bw-al"},as={class:"flex-al gap-5"},ls=["src"],os=l(()=>s("div",{class:"fw-600"},"Số dư tài khoản",-1)),cs={class:"flex-al gap-5"},ns={class:"fw-600"},ds={class:"flex-al gap-3"},rs=["src"],_s=l(()=>s("div",{class:"text-yellow fw-600"},"Point",-1)),us={key:1},hs={class:"flex-al-jt text-red mgt-15"},vs={key:1,class:"flex-al-jt",style:{width:"100%",height:"100%"}},gs={class:"flex-cl-jt"},fs=["src"],ms=l(()=>s("div",{style:{"text-align":"center"},class:"fw-600 fz-24 mgt-10"},"Thanh toán thành công",-1)),bs=l(()=>s("div",{class:"fz-16 mgt-10"},"Đến trang quản lý xem chi tiết giao dịch",-1));function ps(e,t,r,xs,a,i){var _,u,h,v;const b=k("loading");return n(),d("div",I,[a.is_buy?(n(),d(g,{key:0},[U,s("div",z,[s("div",G,[s("div",N,[s("img",{src:i.img("icon_back.svg"),alt:""},null,8,q),E]),L,s("div",O,[s("div",A,[(n(!0),d(g,null,T(a.voiceOptions,(o,p)=>(n(),d("label",{key:p,class:"items-number-voice flex-bw-al"},[s("div",D,[V(s("input",{type:"radio",value:o,"onUpdate:modelValue":t[0]||(t[0]=x=>a.selectedValue=x)},null,8,F),[[P,a.selectedValue]]),s("div",null,[s("div",null,c(o.characters),1),s("div",{class:C(["discount",o.discountClass])},c(o.discountText),3)])]),s("div",null,c(o.points)+" point",1)]))),128))])])]),s("div",K,[s("div",R,[H,s("div",Q,[J,s("div",W,c(i.formatPrice(((_=a.selectedValue)==null?void 0:_.value)??0)||0)+" ký tự",1)]),s("div",X,[Y,s("div",Z,c(i.formatPrice(((u=a.selectedValue)==null?void 0:u.points)??0))+" Point",1)])]),s("div",$,[s("div",ss,[es,s("div",ts,c(i.formatPrice(((h=a.selectedValue)==null?void 0:h.points)??0))+" Point",1)]),s("div",is,[s("div",as,[s("img",{src:i.img("icon_card_buy_more.svg"),alt:""},null,8,ls),os]),s("div",cs,[s("div",ns,c(i.formatPrice(((v=a.user)==null?void 0:v.balance)??0)),1),s("div",ds,[s("img",{src:i.img("icon_point.svg"),alt:""},null,8,rs),_s])])]),s("div",{class:"button mgt-20 flex-al-jt",style:{"border-radius":"10px",height:"45px"},onClick:t[1]||(t[1]=(...o)=>i.payMentSubtitle&&i.payMentSubtitle(...o))},[a.is_loading?(n(),S(b,{key:0})):(n(),d("div",us,"Thanh toán ngay"))]),s("div",hs,c(a.error_message),1)])])])],64)):(n(),d("div",vs,[s("div",gs,[s("img",{style:{"padding-left":"20px"},src:i.img("buy_success.svg"),alt:""},null,8,fs),ms,bs,s("div",{class:"button mgt-30 flex-al-jt",onClick:t[2]||(t[2]=(...o)=>i.goToManage&&i.goToManage(...o))},"Đến trang quản lý")])]))])}typeof f=="function"&&f(m);const Ts=w(m,[["render",ps],["__scopeId","data-v-b9407f38"]]);export{Ts as default};
