import{_ as b,l as y,o as n,c as r,a as e,t as i,F as x,e as k,k as _,p as w,g as N}from"./index-20ac1a1f.js";import{b as p}from"./route-block-83d24a4e.js";const v={data(){return{user:{},is_buy:!0,type_time:"month",error:"",what_select:["Sản xuất video bản tin hàng loạt","Ghép (duet)","Nối video","Tải hàng loạt video từ nhiều nền tảng"],price:[],minutes_buy:0,voice_buy:0,totalPrice:0,selected_period:"",select_package:null,packagesList:[{icon:"icon_Normal_big.svg",name:"Normal",content:"Gói dành cho nhu cầu trung bình"},{icon:"icon_Advance_big.svg",name:"Advance",content:"Gói dành cho nhu cầu cao"},{icon:"icon_Pro_big.svg",name:"Pro",content:"Gói dành cho nhu cầu cao"}]}},computed:{getIconByName(){let s=this.select_package.name;const c={Normal:"icon_Normal_big.svg",Pro:"icon_Pro_big.svg",Advance:"icon_Advance_big.svg"};return this.img(c[s]||"default_icon.svg")},selected_period(){var c;return{Normal:"1 tuần",Advance:"3 tháng",Pro:"6 tháng"}[(c=this.select_package)==null?void 0:c.name]||""}},created(){this.getUser(),this.select_package=JSON.parse(localStorage.getItem("select_package")),console.log(this.select_package),this.price=y().price},methods:{formatNumber(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},goToManage(){this.$router.push("/settings")},goToBuyPackage(){this.$router.push("/buy-package")},async goToPayment(){let s=await this.api({path:"/web/user/buy-package",method:"POST",data:{name_package:this.select_package.name,selected_period:this.select_package.period}});s.success?this.is_buy=!1:this.error=s.message},img(s){return"images/admin-panel/"+s},async getUser(s=3){try{let c=await this.api({path:"/web/user/get-info"});if(c.success)this.user=c.data_user;else throw new Error("API request failed")}catch(c){if(console.error("Error fetching user info:",c),s>0)return await new Promise(d=>setTimeout(d,1e3)),this.getUser(s-1);console.error("Max retry attempts reached")}}}},a=s=>(w("data-v-b9bfde90"),s=s(),N(),s),P={class:"container"},T={key:0,class:"container-all-buy"},S=a(()=>e("div",{class:"space"},null,-1)),B={class:"table-buy-more flex-al-jt"},I={class:"billing-buy-more flex-cl-al ps-rl"},j={class:"icon_logo flex-al-jt",style:{padding:"10px"}},A=["src"],M={class:"fw-600 fz-20"},z=a(()=>e("div",{class:"fw-600 text-green mgt-20"},"SỬ DỤNG TOÀN BỘ TÍNH NĂNG",-1)),G=["src"],q={class:"title-content"},E={class:"flex-al gap-10 mgt-20"},O=["src"],U={class:"title-content"},C={class:"text-yellow"},D={class:"mgt-10"},F={class:"text-yellow"},L=a(()=>e("div",{class:"mgt-20 dashed"},null,-1)),V={class:"flex-bw-al",style:{width:"100%"}},H=a(()=>e("div",{class:"text-300 fz-16"},"Số point cần thanh toán",-1)),J={class:"fw-600 fz-16 flex-al gap-5"},Q={class:"flex-al gap-3"},K=["src"],R=a(()=>e("div",{class:"text-yellow fw-600"},"Point",-1)),W={class:"info-balace flex-bw-al"},X={class:"flex-al gap-5"},Y=["src"],Z=a(()=>e("div",{class:"fw-600"},"Số dư tài khoản",-1)),$={class:"flex-al gap-5"},ee={class:"fw-600"},te={class:"flex-al gap-3"},se=["src"],ce=a(()=>e("div",{class:"text-yellow fw-600"},"Point",-1)),ae=["src"],oe=a(()=>e("div",{class:"text-300 fz-16"},"Quay lại bảng giá",-1)),ie={class:"text-red flex-al-jt mgt-20"},le={key:1,class:"flex-al-jt",style:{width:"100%",height:"100%"}},ne={class:"flex-cl-jt"},re=["src"],_e=a(()=>e("div",{style:{"text-align":"center"},class:"fw-600 fz-24 mgt-10"},"Thanh toán thành công",-1)),de=a(()=>e("div",{class:"fz-16 mgt-10"},"Đến trang quản lý xem chi tiết giao dịch",-1));function ge(s,c,d,he,o,t){var g,h,u,m;return n(),r("div",P,[o.is_buy?(n(),r("div",T,[S,e("div",B,[e("div",I,[e("div",j,[e("img",{style:{width:"100%",height:"100%"},src:t.getIconByName,alt:""},null,8,A)]),e("div",M,i(t.selected_period),1),z,(n(!0),r(x,null,k(o.what_select,(l,f)=>(n(),r("div",{class:"flex-al mgt-15 gap-10",key:f},[e("img",{src:t.img("icon_ok.svg"),alt:""},null,8,G),e("div",q,i(l),1)]))),128)),e("div",E,[e("img",{src:t.img("icon_ok.svg"),alt:""},null,8,O),e("div",U,[e("div",null,[_(i(t.formatNumber(((g=o.select_package)==null?void 0:g.time)??0))+" + ",1),e("span",C,"bonus "+i(t.formatNumber(o.select_package.bonus_time)),1),_(" phút tạo phụ đề AI ")]),e("div",D,[_(i(t.formatNumber(((h=o.select_package)==null?void 0:h.voice)??0))+" + ",1),e("span",F,"bonus "+i(t.formatNumber(o.select_package.bonus_voice)),1),_(" ký tự lồng tiếng AI ")])])]),L,e("div",V,[H,e("div",J,[e("div",null,i(t.formatNumber(((u=o.select_package)==null?void 0:u.price)??0)),1),e("div",Q,[e("img",{src:t.img("icon_point.svg"),alt:""},null,8,K),R])])]),e("div",W,[e("div",X,[e("img",{src:t.img("icon_card_buy_more.svg"),alt:""},null,8,Y),Z]),e("div",$,[e("div",ee,i(t.formatNumber(((m=o.user)==null?void 0:m.balance)??0)),1),e("div",te,[e("img",{src:t.img("icon_point.svg"),alt:""},null,8,se),ce])])]),e("div",{class:"button flex-al-jt mgt-20",style:{"border-radius":"10px",width:"100%"},onClick:c[0]||(c[0]=(...l)=>t.goToPayment&&t.goToPayment(...l))},"Thanh toán ngay"),e("div",{class:"flex-al-jt gap-5 mgt-30",style:{cursor:"pointer"},onClick:c[1]||(c[1]=(...l)=>t.goToBuyPackage&&t.goToBuyPackage(...l))},[e("img",{src:t.img("icon_back.svg"),alt:""},null,8,ae),oe]),e("div",ie,i(o.error),1)])])])):(n(),r("div",le,[e("div",ne,[e("img",{style:{"padding-left":"20px"},src:t.img("buy_success.svg"),alt:""},null,8,re),_e,de,e("div",{class:"button mgt-30 flex-al-jt",onClick:c[2]||(c[2]=(...l)=>t.goToManage&&t.goToManage(...l))},"Đến trang quản lý")])]))])}typeof p=="function"&&p(v);const pe=b(v,[["render",ge],["__scopeId","data-v-b9bfde90"]]);export{pe as default};
